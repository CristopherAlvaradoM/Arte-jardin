---
interface Props {
  phoneNumber: string;
  message: string;
}

const { phoneNumber, message } = Astro.props;
---

<!-- Contactacto -->
<div class="relative w-full h-auto">
  <img
    src="contactanos.png"
    alt="Fondo"
    class="absolute inset-0 w-full h-full object-cover z-0"
  />

  <!-- Capa oscura para mejorar legibilidad del texto -->
  <div class="absolute inset-0 bg-black bg-opacity-50 z-10"></div>

  <!-- Contenido centrado -->
  <div
    class="relative z-20 flex flex-col items-center justify-center text-white text-center py-36 px-6 md:px-32"
  >
    <h2 class="text-3xl md:text-5xl font-bold mb-4">Contáctanos</h2>
    <p class="text-sm md:text-2xl mb-6 py-3">
      ¿Te gustaría transformar tus espacios en un santuario sostenible y
      hermoso?<br />
      Contáctanos para crear un jardín que te conecte con la naturaleza.
    </p>
    <button
      id="whatsapp-button"
      class="bg-green_tertiary text-white text-lg md:text-2xl font-medium px-10 md:px-28 py-3 rounded-full transition-transform duration-300 ease-in-out hover:scale-105"
    >
      Contáctanos
    </button>
  </div>
</div>

<script define:vars={{ phoneNumber, message }}>
  document.getElementById("whatsapp-button").addEventListener("click", () => {
    const isMobile =
      /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(
        navigator.userAgent
      );
    const encodedMessage = encodeURIComponent(message);

    let whatsappUrl;

    if (isMobile) {
      // Para dispositivos móviles (abre la app nativa si está instalada)
      whatsappUrl = `whatsapp://send?phone=${phoneNumber}&text=${encodedMessage}`;
    } else {
      // Para escritorio (abre WhatsApp Web)
      whatsappUrl = `https://api.whatsapp.com/send?phone=${phoneNumber}&text=${encodedMessage}`;
    }

    window.open(whatsappUrl, "_blank");
  });
</script>
