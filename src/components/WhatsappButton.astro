---
// src/components/WhatsappButton.astro
interface Props {
  phoneNumber: string;
  message: string;
}

const { phoneNumber, message } = Astro.props;
---

<button id="whatsapp-button">
  Abrir WhatsApp
</button>

<script define:vars={{ phoneNumber, message }}>
  document.getElementById('whatsapp-button').addEventListener('click', () => {
    const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
    const encodedMessage = encodeURIComponent(message);

    let whatsappUrl;

    if (isMobile) {
      // Para dispositivos móviles (abre la app nativa si está instalada)
      whatsappUrl = `whatsapp://send?phone=${phoneNumber}&text=${encodedMessage}`;
    } else {
      // Para escritorio (abre WhatsApp Web)
      whatsappUrl = `https://api.whatsapp.com/send?phone=${phoneNumber}&text=${encodedMessage}`;
    }

    window.open(whatsappUrl, '_blank');
  });
</script>